#include "cszm_modules/newspawn"

array<array<CSpawnPoint@>> New_Spawns = 
{
	{
		CSpawnPoint(Vector(533.737, -1276.45, 0.03125), QAngle(0, -142.32, 0)),
		CSpawnPoint(Vector(493.954, -1385.69, 0.03125), QAngle(0, 170.058, 0)),
		CSpawnPoint(Vector(401.277, -1227.77, 7.76096), QAngle(0, -58.8088, 0)),
		CSpawnPoint(Vector(427.558, -1454.53, 2.51342), QAngle(0, 87.8607, 0)),
		CSpawnPoint(Vector(554.88, -1639.78, 0.03125), QAngle(-0.2904, 160.797, 0)),
		CSpawnPoint(Vector(447.794, -1540.4, 0.03125), QAngle(3.3033, -165.444, 0)),
		CSpawnPoint(Vector(443.623, -1625.48, 0.03125), QAngle(2.17799, 172.74, 0)),
		CSpawnPoint(Vector(345.953, -1512.49, 0.03125), QAngle(1.37939, -164.826, 0)),
		CSpawnPoint(Vector(342.955, -1593.75, 0.03125), QAngle(0.108866, 178.149, 0)),
		CSpawnPoint(Vector(377.223, -1702.98, 0.03125), QAngle(0.181462, -156.066, 0)),
		CSpawnPoint(Vector(304.55, -1701, 0.03125), QAngle(-1.19794, 178.911, 0)),
		CSpawnPoint(Vector(233.846, -1599.54, 0.03125), QAngle(1.37936, 172.958, 0)),
		CSpawnPoint(Vector(288.168, -1524.9, 0.03125), QAngle(1.88757, -148.6, 0)),
		CSpawnPoint(Vector(197.788, -1517.49, 0.03125), QAngle(1.88757, -172.014, 0)),
		CSpawnPoint(Vector(127.382, -1582.37, 0.03125), QAngle(5.26347, 176.878, 0)),
		CSpawnPoint(Vector(50.7339, -1544.89, 0.03125), QAngle(4.31966, 179.964, 0)),
		CSpawnPoint(Vector(-21.4264, -1536.04, 0.03125), QAngle(4.79156, 176.806, 0)),
		CSpawnPoint(Vector(-57.2075, -1845.54, 8.03125), QAngle(8.20376, 52.9011, 0)),
		CSpawnPoint(Vector(219.528, -1703.92, 0.03125), QAngle(1.01634, -179.432, 0)),
		CSpawnPoint(Vector(146.057, -1644.54, 0.03125), QAngle(1.37934, 176.975, 0)),
		CSpawnPoint(Vector(133.736, -1702.69, 0.03125), QAngle(7.58664, 177.882, 0)),
		CSpawnPoint(Vector(31.37, -1701.19, 0.03125), QAngle(5.91684, 179.189, 0)),
		CSpawnPoint(Vector(-0.165436, -1606.91, 0.03125), QAngle(3.26693, -179.976, 0)),
		CSpawnPoint(Vector(83.2054, -1629.74, 0.03125), QAngle(-0.0726671, -166.509, 0)),
		CSpawnPoint(Vector(-56.6387, -1697.77, 0.03125), QAngle(-1.45209, 172.546, 0))
	},
	{
		CSpawnPoint(Vector(-671.151, -2563.97, -431.969), QAngle(2.72234, 76.5554, 0)),
		CSpawnPoint(Vector(-658.213, -2462.9, -431.969), QAngle(0.979939, 92.7089, 0)),
		CSpawnPoint(Vector(-659.918, -2378.22, -431.969), QAngle(3.99284, 83.1257, 0)),
		CSpawnPoint(Vector(-690.856, -2251.14, -431.969), QAngle(0.762139, -55.5041, 0)),
		CSpawnPoint(Vector(-511.314, -2243.64, -431.969), QAngle(2.50454, -123.349, 0)),
		CSpawnPoint(Vector(-573.335, -2383.16, -431.969), QAngle(9.11112, 101.397, 0)),
		CSpawnPoint(Vector(-562.473, -2537.2, -431.969), QAngle(4.02909, 86.6232, 0)),
		CSpawnPoint(Vector(-456.903, -2511.59, -431.969), QAngle(4.79139, 83.1021, 0)),
		CSpawnPoint(Vector(-486.597, -2445.23, -431.969), QAngle(8.16729, 110.255, 0)),
		CSpawnPoint(Vector(-390.316, -2616.8, -431.969), QAngle(3.5935, 90.0354, 0)),
		CSpawnPoint(Vector(-377.949, -2516.87, -431.969), QAngle(3.04899, 90.0717, 0)),
		CSpawnPoint(Vector(-104.434, -2617.11, -431.969), QAngle(4.28319, 89.6725, 0)),
		CSpawnPoint(Vector(-240.465, -2621.68, -431.969), QAngle(3.4846, 94.0648, 0)),
		CSpawnPoint(Vector(-309.135, -2570.81, -431.969), QAngle(4.64619, 94.7907, 0)),
		CSpawnPoint(Vector(-307.401, -2471.13, -431.969), QAngle(4.75509, 89.4183, 0)),
		CSpawnPoint(Vector(-228.88, -2352.1, -431.969), QAngle(2.6134, 97.0776, 0)),
		CSpawnPoint(Vector(-110.976, -2443.1, -431.969), QAngle(4.53731, 93.9557, 0)),
		CSpawnPoint(Vector(-115.895, -2277.15, -431.969), QAngle(2.10521, -95.6521, 0)),
		CSpawnPoint(Vector(-160.678, -2145.46, -431.969), QAngle(3.66611, -90.6064, 0)),
		CSpawnPoint(Vector(-330.199, -2227.61, -431.969), QAngle(5.55369, -88.1381, 0)),
		CSpawnPoint(Vector(-324.782, -2124.11, -431.969), QAngle(4.9366, -85.6333, 0)),
		CSpawnPoint(Vector(-403.396, -2447.82, -431.969), QAngle(2.17785, 94.8996, 0)),
		CSpawnPoint(Vector(-335.621, -2360.1, -431.969), QAngle(4.68252, 1.64482, 0)),
		CSpawnPoint(Vector(-115.757, -2350.07, -431.969), QAngle(2.06893, 178.716, 0)),
		CSpawnPoint(Vector(-710.596, -2146.8, -515.969), QAngle(0.97993, 51.158, 0)),
		CSpawnPoint(Vector(-552.688, -2091.8, -515.969), QAngle(2.21412, 179.6, 0))
	},
	{
		CSpawnPoint(Vector(-103.837, -2612.44, -431.969), QAngle(-0.472083, 135.156, 0)),
		CSpawnPoint(Vector(-851.195, -2245.04, -431.969), QAngle(-0.50838, -36.7969, 0)),
		CSpawnPoint(Vector(-234.734, -1539.48, -431.969), QAngle(0.798454, -81.1684, 0)),
		CSpawnPoint(Vector(528.247, -1209.01, -363.969), QAngle(8.89335, 147.34, 0)),
		CSpawnPoint(Vector(379.319, -765.853, -363.969), QAngle(3.5572, -95.883, 0)),
		CSpawnPoint(Vector(-9.73924, -1428.88, 0.03125), QAngle(2.5408, 29.3156, 0)),
		CSpawnPoint(Vector(999.121, -1271.62, 159.44), QAngle(10.672, -151.036, 0)),
		CSpawnPoint(Vector(-42.5394, -1324.87, 181.908), QAngle(17.206, 141.41, 0)),
		CSpawnPoint(Vector(336.969, -410.249, 320.031), QAngle(2.17782, -132.051, 0)),
		CSpawnPoint(Vector(-210.612, -60.1341, 0.03125), QAngle(0.97993, -101.885, 0)),
		CSpawnPoint(Vector(-358.508, -856.836, -139.969), QAngle(3.81133, -42.7163, 0)),
		CSpawnPoint(Vector(-674.554, -839.735, -493.969), QAngle(4.97298, -65.5854, 0)),
		CSpawnPoint(Vector(-1208.89, -1398.85, -535.969), QAngle(-1.45212, 4.12333, 0)),
		CSpawnPoint(Vector(-1075.39, -497.404, -399.969), QAngle(2.54088, -134.447, 0)),
		CSpawnPoint(Vector(-969.971, -1033.61, 0.03125), QAngle(14.7014, 40.3742, 0)),
		CSpawnPoint(Vector(-934.106, -327.967, 8.03125), QAngle(1.9238, -142.179, 0)),
		CSpawnPoint(Vector(-264.189, -2311.49, 0.03125), QAngle(0.834789, 98.3092, 0)),
		CSpawnPoint(Vector(-716.679, -1590.04, 0.03125), QAngle(1.8875, -94.5656, 0)),
		CSpawnPoint(Vector(-1116.43, -1838.04, -47.9688), QAngle(14.9192, -57.4669, 0)),
		CSpawnPoint(Vector(-203.379, -2036.05, -307.969), QAngle(19.3841, -77.3594, 0)),
		CSpawnPoint(Vector(-141.061, -1281.5, -339.048), QAngle(10.9625, -107.392, 0)),
		CSpawnPoint(Vector(16.0587, -1850.45, 8.03125), QAngle(0.87111, 49.0476, 0)),
		CSpawnPoint(Vector(59.2885, -1367.53, 322.031), QAngle(17.7506, 126.452, 0)),
		CSpawnPoint(Vector(-275.052, -1727.14, 322.031), QAngle(5.80792, 111.279, 0))
	}
};

array<array<CSpawnPoint@>> New_ZombieSpawns = 
{
	{
		CSpawnPoint(Vector(-235.59, -71.1439, 0.03125), QAngle(0.215495, -102.027, 0)),
		CSpawnPoint(Vector(-544.385, -237.03, 0.03125), QAngle(2.28461, -64.2026, 0)),
		CSpawnPoint(Vector(-172.878, -195.046, -106.547), QAngle(-1.88986, -84.9299, 0)),
		CSpawnPoint(Vector(-333.359, -855.496, -139.969), QAngle(4.35376, -5.07009, 0)),
		CSpawnPoint(Vector(-440.879, -855.029, -139.969), QAngle(30.635, -171.196, 0)),
		CSpawnPoint(Vector(-165.431, -1307, -105.04), QAngle(-5.22943, 95.6058, -0)),
		CSpawnPoint(Vector(-192.564, -1119.76, -110.482), QAngle(3.04697, 94.3395, -0)),
		CSpawnPoint(Vector(-162.172, -897.227, -107.969), QAngle(11.6138, -103.018, 0)),
		CSpawnPoint(Vector(-211.891, -693.682, -114.347), QAngle(-3.63223, 75.2025, -0)),
		CSpawnPoint(Vector(-1076.48, -354.163, 8.03125), QAngle(3.66406, -10.6471, 0)),
		CSpawnPoint(Vector(-979.752, -434.448, 8.03125), QAngle(4.31746, 5.01952, 0)),
		CSpawnPoint(Vector(-673.234, -1170.66, 0.03125), QAngle(17.8574, 126.071, 0)),
		CSpawnPoint(Vector(-800.498, -1006.87, 0.03125), QAngle(10.0892, 65.4505, 0)),
		CSpawnPoint(Vector(-727.792, -746.386, 0.03125), QAngle(2.64767, 99.2096, 0)),
		CSpawnPoint(Vector(-788.191, -340.552, 8.03125), QAngle(9.36317, -35.6086, 0)),
		CSpawnPoint(Vector(-416.905, -580.369, 6.03125), QAngle(-3.59593, -73.5785, 0)),
		CSpawnPoint(Vector(-388.363, -1193.57, 4.03125), QAngle(-6.10064, 30.2036, 0)),
		CSpawnPoint(Vector(-501.8, -1565.19, 6.03125), QAngle(16.5506, 6.31822, 0)),
		CSpawnPoint(Vector(-257.371, -1528.35, -11.9688), QAngle(11.1056, -155.435, 0)),
		CSpawnPoint(Vector(-241.459, -2278.67, 0.03125), QAngle(6.13246, 138.499, 0)),
		CSpawnPoint(Vector(-536.413, -2096.99, 0.03125), QAngle(3.62776, 58.3127, -0)),
		CSpawnPoint(Vector(-705.06, -1559.48, 0.03125), QAngle(24.2462, -93.0713, 0)),
		CSpawnPoint(Vector(-715.408, -1750.44, 0.03125), QAngle(-7.62521, -59.2761, 0)),
		CSpawnPoint(Vector(-697.481, -1980.31, 0.03125), QAngle(4.7894, 90.7648, 0)),
		CSpawnPoint(Vector(-900.127, -2163.15, 0.03125), QAngle(16.115, 26.6295, 0)),
		CSpawnPoint(Vector(-874.879, -1853.63, -47.9688), QAngle(20.6888, -156.306, 0)),
		CSpawnPoint(Vector(-1151.48, -1885.16, -47.9688), QAngle(24.2099, -14.01, 0)),
		CSpawnPoint(Vector(-1064.73, -2584.27, -47.9688), QAngle(20.471, 61.2762, 0)),
		CSpawnPoint(Vector(-942.972, -2493.62, -47.9688), QAngle(15.6794, 106.644, 0)),
		CSpawnPoint(Vector(-1037.06, -2366.04, -47.9688), QAngle(23.9922, 108.684, 0)),
		CSpawnPoint(Vector(-1497.22, -2377.4, -47.9688), QAngle(8.67354, 6.79014, 0)),
		CSpawnPoint(Vector(-1517.83, -2178.76, -47.9688), QAngle(12.5576, 2.68814, 0)),
		CSpawnPoint(Vector(-1436.24, -2175.59, -47.9688), QAngle(8.78243, 0.0382338, -0)),
		CSpawnPoint(Vector(-1110.97, -2402.53, -311.969), QAngle(-23.815, 56.739, 0)),
		CSpawnPoint(Vector(-923.649, -2225.29, -431.969), QAngle(15.0623, -16.2602, 0)),
		CSpawnPoint(Vector(-776.325, -2238.99, -431.969), QAngle(7.87492, -89.5863, 0)),
		CSpawnPoint(Vector(-789.225, -2525.32, -431.969), QAngle(4.17232, 81.0237, 0)),
		CSpawnPoint(Vector(-692.922, -2551.81, -431.969), QAngle(5.80583, 49.4789, 0)),
		CSpawnPoint(Vector(-496.236, -2224.03, -431.969), QAngle(5.26133, -143.94, 0)),
		CSpawnPoint(Vector(-735.969, -2054.98, -515.969), QAngle(-6.10057, -17.9666, 0)),
		CSpawnPoint(Vector(-714.595, -2164.66, -515.969), QAngle(-10.0936, 26.283, 0)),
		CSpawnPoint(Vector(-623.39, -1882.05, -502.827), QAngle(-1.30898, 90.3525, 0)),
		CSpawnPoint(Vector(-657.351, -1560.45, -486.607), QAngle(1.34092, -84.7222, 0)),
		CSpawnPoint(Vector(-1177.95, -1455.18, -535.969), QAngle(-3.99518, -1.16368, 0)),
		CSpawnPoint(Vector(-1173.05, -1364.63, -535.969), QAngle(-3.45068, -16.7687, 0)),
		CSpawnPoint(Vector(-819.394, -1376.98, -518.06), QAngle(7.98382, -15.7886, 0)),
		CSpawnPoint(Vector(-611.932, -1418.53, -516.338), QAngle(4.28122, 155.257, 0)),
		CSpawnPoint(Vector(-669.329, -863.557, -493.969), QAngle(4.86202, -85.1095, 0)),
		CSpawnPoint(Vector(-584.923, -814.613, -493.969), QAngle(2.50252, -105.558, 0)),
		CSpawnPoint(Vector(-990.72, -1208.44, -455.969), QAngle(10.7063, -23.5075, 0)),
		CSpawnPoint(Vector(-817.169, -1194.51, -455.969), QAngle(2.64773, 124.125, -0)),
		CSpawnPoint(Vector(-922.759, -1014.2, -455.969), QAngle(6.93113, -42.7829, 0)),
		CSpawnPoint(Vector(-1114.07, -496.001, -399.969), QAngle(-0.00219773, -75.1027, 0)),
		CSpawnPoint(Vector(-1031.76, -510.409, -399.969), QAngle(4.1723, -107.936, 0)),
		CSpawnPoint(Vector(-1005.49, -860.793, -399.969), QAngle(0.360803, 32.6719, 0)),
		CSpawnPoint(Vector(-1171.8, -1139.75, -223.969), QAngle(25.0448, 56.0491, 0)),
		CSpawnPoint(Vector(327.782, -257.892, 160.031), QAngle(0.614945, -169.9, 0)),
		CSpawnPoint(Vector(260.031, -20.7868, 160.031), QAngle(1.34094, -137.252, 0)),
		CSpawnPoint(Vector(-8.82224, -180.399, 160.031), QAngle(1.01425, 8.87689, 0)),
		CSpawnPoint(Vector(-25.6919, -461.862, 320.031), QAngle(4.89836, -44.4655, -0)),
		CSpawnPoint(Vector(320.233, -455.386, 320.031), QAngle(2.57516, -125.523, 0)),
		CSpawnPoint(Vector(202.886, -593.18, 320.031), QAngle(5.44285, 47.555, 0)),
		CSpawnPoint(Vector(343.959, -911.46, 320.031), QAngle(4.57165, -148.315, -0)),
		CSpawnPoint(Vector(-72.2825, -979.525, 320.031), QAngle(2.64775, -18.3295, 0)),
		CSpawnPoint(Vector(138.661, -1353.61, 322.847), QAngle(0.68754, -176.271, 0)),
		CSpawnPoint(Vector(-218.657, -1367.51, 322.031), QAngle(-2.03496, 85.0293, 0)),
		CSpawnPoint(Vector(-518.851, -1583.11, 322.031), QAngle(3.70044, 36.6283, -0)),
		CSpawnPoint(Vector(-420.919, -1523.11, 322.031), QAngle(6.82224, -144.108, -0)),
		CSpawnPoint(Vector(-297.941, -1718.69, 322.031), QAngle(-0.909658, 136.043, 0)),
		CSpawnPoint(Vector(-268.768, -1597.08, 322.031), QAngle(5.37024, 136.22, 0)),
		CSpawnPoint(Vector(-43.068, -1344.44, 181.759), QAngle(6.20513, 38.747, 0)),
		CSpawnPoint(Vector(2.50076, -1125.66, 194.085), QAngle(8.31054, -13.1605, -0)),
		CSpawnPoint(Vector(237.382, -1184.9, 207.103), QAngle(22.1408, -34.1797, 0)),
		CSpawnPoint(Vector(959.663, -1194.97, 165.876), QAngle(21.8867, -125.329, 0)),
		CSpawnPoint(Vector(965.764, -1333.38, 140.219), QAngle(17.7122, -177.492, 0)),
		CSpawnPoint(Vector(790.887, -1846.4, 137.971), QAngle(16.1875, 144.792, -0)),
		CSpawnPoint(Vector(747.83, -1688.38, 59.7017), QAngle(13.1746, 170.565, 0)),
		CSpawnPoint(Vector(519.198, -1830.7, 8.03125), QAngle(6.71321, 170.668, -0)),
		CSpawnPoint(Vector(254.283, -1854.93, 8.03125), QAngle(7.87481, 152.12, -0)),
		CSpawnPoint(Vector(2.64592, -1873.88, 8.03125), QAngle(5.37011, 116.929, -0)),
		CSpawnPoint(Vector(-50.3374, -1541.75, 0.03125), QAngle(6.205, -40.8468, 0)),
		CSpawnPoint(Vector(103.832, -1577.73, 0.03125), QAngle(4.60779, -42.5529, -0)),
		CSpawnPoint(Vector(485.448, -1292.9, 0.03125), QAngle(10.0165, -109.272, 0)),
		CSpawnPoint(Vector(447.965, -1485.36, 0.03125), QAngle(3.08319, -141.718, -0)),
		CSpawnPoint(Vector(558.725, -1163.88, 8.83585), QAngle(3.8818, 163.027, 0)),
		CSpawnPoint(Vector(489.134, -1182.44, 8.83585), QAngle(4.8619, 102.442, 0)),
		CSpawnPoint(Vector(-41.8762, -1438.47, 2.00711), QAngle(4.89821, 28.0268, -0)),
		CSpawnPoint(Vector(130.631, -1062.02, 0.03125), QAngle(8.02002, -82.434, 0)),
		CSpawnPoint(Vector(-45.9973, -1005.26, -179.969), QAngle(22.3948, -1.00029, 0)),
		CSpawnPoint(Vector(382.924, -744.142, -363.969), QAngle(1.59496, -88.3733, 0)),
		CSpawnPoint(Vector(364.051, -882.964, -363.969), QAngle(1.30456, -101.878, -0)),
		CSpawnPoint(Vector(507.452, -1181.44, -363.969), QAngle(6.56806, -108.63, 0)),
		CSpawnPoint(Vector(281.426, -1602.62, -383.899), QAngle(20.3258, 171.147, 0)),
		CSpawnPoint(Vector(80.2103, -1617.02, -435.084), QAngle(9.32685, 167.225, 0)),
		CSpawnPoint(Vector(-208.741, -1346.03, -334.365), QAngle(25.1901, -78.3872, -0)),
		CSpawnPoint(Vector(-99.8595, -1331.59, -336.471), QAngle(27.2229, -110.626, 0)),
		CSpawnPoint(Vector(-330.764, -1761.18, -431.969), QAngle(8.7462, -65.9424, -0)),
		CSpawnPoint(Vector(-80.8471, -2166.4, -431.969), QAngle(2.17589, 125.306, 0)),
		CSpawnPoint(Vector(-100.638, -2623.73, -431.969), QAngle(1.05059, 125.917, 0)),
		CSpawnPoint(Vector(-435.064, -2087.92, -303.969), QAngle(9.07289, 59.1365, -0)),
		CSpawnPoint(Vector(-436.622, -1755.22, -303.969), QAngle(9.32699, -39.3929, 0)),
		CSpawnPoint(Vector(-96.4423, -2032.38, -307.969), QAngle(11.7954, 98.2538, 0))
	}
};

int iMaxPlayers;

void OnMapInit()
{
	iMaxPlayers = Globals.GetMaxClients();
	OnNewRound();
}

void OnNewRound()
{
	Schedule::Task(0.05f, "SetUpStuff");
}

void SetUpStuff()
{
	Engine.Ent_Fire("screenoverlay", "StartOverlays");
	Engine.Ent_Fire("ventprop_junk", "DisableMotion");
	Engine.Ent_Fire("ventprop_junk", "DamageToEnableMotion 10");
	CreatedByColors();

	RemoveNativeSpawns("info_player_zombie");
	RemoveNativeSpawns("info_player_human");
	CreateSpawnsFromArray(New_Spawns, true);
}

void OnMatchBegin() 
{
	RemoveNativeSpawns("info_player_human");
	CreateSpawnsFromArray(New_ZombieSpawns, false);
}

void CreatedByColors()
{
	float flFireTime = Math::RandomFloat(0.10f, 1.20f);
	
	Schedule::Task(flFireTime, "CreatedByColors");
	
	int iR = Math::RandomInt(32, 255);
	int iG = Math::RandomInt(32, 255);
	int iB = Math::RandomInt(32, 255);
	
	Engine.Ent_Fire("created_by", "color", ""+formatInt(iR)+" "+formatInt(iG)+" "+formatInt(iB));
}